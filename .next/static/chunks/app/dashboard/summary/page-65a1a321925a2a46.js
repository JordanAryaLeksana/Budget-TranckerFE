(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{8508:(e,a,s)=>{"use strict";s.d(a,{ME:()=>l,iD:()=>n,kz:()=>i,ri:()=>o});var t=s(35974),r=s(55103);let n=async e=>{try{let a=await t.A.post("/auth/login",e);return console.log("Login response:",a.data),a.data}catch(e){(0,r.h)(e,"Login Failed")}},i=async e=>{try{return(await t.A.post("/auth/register",e)).data}catch(e){(0,r.h)(e,"Register Failed")}},l=async e=>{try{return(await t.A.get("/auth/profile",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){(0,r.h)(e,"Get Profile Failed")}},o=()=>{localStorage.removeItem("token")}},35974:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=s(23464).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},36221:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var t=s(95155),r=s(47650),n=s(58242);let i={information:(0,t.jsx)(n.$4v,{className:"text-blue-500 w-6 h-6"}),success:(0,t.jsx)(n.jh$,{className:"text-green-500 w-6 h-6"}),warning:(0,t.jsx)(n.jDV,{className:"text-yellow-500 w-6 h-6"}),danger:(0,t.jsx)(n.XfH,{className:"text-red-500 w-6 h-6"})};function l(e){let{message:a,type:s="information",onOk:n,onCancel:l}=e;return(0,r.createPortal)((0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{children:i[s]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-gray-800 font-medium",children:a})})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[l&&(0,t.jsx)("button",{onClick:l,className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,t.jsx)("button",{onClick:n||(()=>{}),className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"OK"})]})]})}),document.body)}},49227:(e,a,s)=>{"use strict";function t(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}s.d(a,{A:()=>t})},55103:(e,a,s)=>{"use strict";function t(e,a){if("object"==typeof e&&null!==e&&"response"in e){var s,t;let r=null==(s=e.response)?void 0:s.data;if(r&&"object"==typeof r&&!Array.isArray(r)){if(Array.isArray(r.errors)&&r.errors.length>0)throw Error((null==r||null==(t=r.errors[0])?void 0:t.msg)||a);if("string"==typeof r.message)throw Error(r.message)}if("string"==typeof r)throw Error(r)}throw console.error("Unhandled error structure:",e),Error(a)}s.d(a,{h:()=>t})},63992:(e,a,s)=>{Promise.resolve().then(s.bind(s,95946))},95946:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>u});var t=s(95155),r=s(12115),n=s(29911),i=s(35974),l=s(49227),o=s(55103);let c=async()=>{try{return(await i.A.get("/monthly-summaries",{headers:(0,l.A)()})).data}catch(e){(0,o.h)(e,"Failed to fetch monthly summaries")}},d=async()=>{try{let e=await i.A.post("/monthly-summaries/generate",{},{headers:(0,l.A)()});return console.log("Generate Monthly Summary Response:",e.data),e.data}catch(e){(0,o.h)(e,"Failed to fetch monthly summaries")}};var m=s(8508),h=s(36221);function u(){let[e,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(!1),[u,y]=(0,r.useState)(null),g=async()=>{try{let e=localStorage.getItem("token"),a=(await (0,m.ME)(e||"")).data.id,s=await c(),t=new Date().toISOString().slice(0,10),r=s.data.find(e=>{var s;return e.user_id===a&&(null==(s=e.created_at)?void 0:s.slice(0,10))===t});r?(o(!0),i({summary:r.ai_summary,recomendations:r.ai_recomendations,trend_analysis:r.trend_analysis}),console.log("Found summary for today:",r.ai_recomendations)):o(!1)}catch(e){e instanceof Error?(y({message:e.message,type:"danger"}),console.error("Error checking today's summary:",e.message)):y({message:"Terjadi Kesalahan",type:"danger"})}};(0,r.useEffect)(()=>{g()},[]);let x=async()=>{a(!0);try{let e=await d();console.log(e),e.success&&e.data&&i({summary:e.data.summary,recomendations:e.data.recommendations,trend_analysis:e.data.trend_analysis}),console.log("Generate Monthly Summary Response:",e.data.recomendations),o(!0)}catch(e){e instanceof Error?y({message:e.message,type:"danger"}):y({message:"Terjadi Kesalahan",type:"danger"})}finally{a(!1)}};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"AI Financial Summary"}),(0,t.jsxs)("button",{onClick:x,disabled:e,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block",children:e?(0,t.jsx)(n.DIg,{className:"animate-spin"}):(0,t.jsx)(n.y8Q,{})}),e?"Generating...":"Generate Summary"]})]}),s&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Summary Overview"}),(0,t.jsx)("p",{className:"text-gray-600",children:s.summary})]}),Array.isArray(s.recomendations)&&(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Recommendation"}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:s.recomendations.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-yellow-600",children:"â€¢"}),e]},a))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-yellow-600",children:"Trend Analysis"}),(0,t.jsx)("p",{className:"text-gray-700",children:s.trend_analysis})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"You can Generate detail financial in tomorrow"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Powered by AI - Meta Llama 3"})]}),!s&&!e&&!l&&(0,t.jsxs)("div",{className:"text-gray-500 text-sm",children:["Click this Button ",(0,t.jsx)("b",{children:'"Generate Summary"'})," for generate your financial summary."]}),u&&(0,t.jsx)(h.A,{type:"danger",message:u.message,onOk:()=>u.onOk})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[380,711,673,441,684,358],()=>a(63992)),_N_E=e.O()}]);