(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{9489:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(95155),s=a(60708),n=a(71706),o=a(35695),i=a(12115),c=a(36221),l=a(80833);function d(){let{id:e}=(0,o.useParams)(),t=(0,o.useRouter)(),[a,d]=(0,i.useState)(),[u,h]=(0,i.useState)(!0),[m,g]=(0,i.useState)(!1),[y,p]=(0,i.useState)(null),[x,f]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(!e||"string"!=typeof e){f(!1),h(!1);return}(async()=>{try{let t=(await (0,n.Hx)(Number(e))).data;d({type:t.type,amount:t.amount.toString(),date:t.date.slice(0,10),note:t.note,categoryId:t.category_id})}catch(e){p({message:e instanceof Error?e.message:"Terjadi Kesalahan",type:"danger"})}finally{h(!1)}})()},[e]);let b=async t=>{g(!0);try{await (0,n.Xk)(Number(e),{...t}),p({type:"success",message:"Transaksi Berhasil diperbarui"})}catch(e){p({message:e instanceof Error?e.message:"Terjadi Kesalahan",type:"danger"})}finally{g(!1)}};return u?(0,r.jsx)(l.A,{}):x?(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Edit Transaksi"}),m&&(0,r.jsx)(l.A,{}),y&&(0,r.jsx)(c.A,{type:y.type,message:y.message,onOk:()=>{p(null),"success"===y.type&&t.push("/dashboard/transaction")}}),a&&(0,r.jsx)(s.A,{initialData:a,onSubmit:b})]}):(0,r.jsx)(r.Fragment,{children:"Invalid Transaction ID"})}},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},35974:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(23464).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},36221:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(95155),s=a(47650),n=a(58242);let o={information:(0,r.jsx)(n.$4v,{className:"text-blue-500 w-6 h-6"}),success:(0,r.jsx)(n.jh$,{className:"text-green-500 w-6 h-6"}),warning:(0,r.jsx)(n.jDV,{className:"text-yellow-500 w-6 h-6"}),danger:(0,r.jsx)(n.XfH,{className:"text-red-500 w-6 h-6"})};function i(e){let{message:t,type:a="information",onOk:n,onCancel:i}=e;return(0,s.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{children:o[a]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-gray-800 font-medium",children:t})})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[i&&(0,r.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,r.jsx)("button",{onClick:n||(()=>{}),className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"OK"})]})]})}),document.body)}},37861:(e,t,a)=>{Promise.resolve().then(a.bind(a,9489))},49227:(e,t,a)=>{"use strict";function r(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}a.d(t,{A:()=>r})},55103:(e,t,a)=>{"use strict";function r(e,t){if("object"==typeof e&&null!==e&&"response"in e){var a,r;let s=null==(a=e.response)?void 0:a.data;if(s&&"object"==typeof s&&!Array.isArray(s)){if(Array.isArray(s.errors)&&s.errors.length>0)throw Error((null==s||null==(r=s.errors[0])?void 0:r.msg)||t);if("string"==typeof s.message)throw Error(s.message)}if("string"==typeof s)throw Error(s)}throw console.error("Unhandled error structure:",e),Error(t)}a.d(t,{h:()=>r})},60708:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(95155),s=a(12115),n=a(35974),o=a(55103),i=a(49227);let c=async()=>{try{return(await n.A.get("/categories",{headers:(0,i.A)()})).data}catch(e){(0,o.h)(e,"Failed to fetch categories")}},l=e=>{let{initialData:t,onSubmit:a}=e,[n,o]=(0,s.useState)({type:"expense",amount:"",date:new Date().toISOString().slice(0,10),note:"",categoryId:""}),[i,l]=(0,s.useState)([]),d=async()=>{try{let e=await c();l(e.data)}catch(e){e instanceof Error?console.error({message:e.message,type:"danger"}):console.error({message:"Terjadi Kesalahan",type:"danger"})}};(0,s.useEffect)(()=>{t&&o({...t,categoryId:String(t.categoryId),amount:String(t.amount)})},[]),(0,s.useEffect)(()=>{d()},[]);let u=e=>{let{name:t,value:a}=e.target;if("amount"===t){let e=function(e){let t=parseInt(e.replace(/\D/g,""));return isNaN(t)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)}(a.replace(/\D/g,""));o(t=>({...t,amount:e}));return}o(e=>({...e,[t]:a}))};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=n.amount.replace(/\D/g,"");a({...n,amount:t,categoryId:parseInt(String(n.categoryId))})},className:"space-y-4 max-w-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tipe",className:"block mb-1 text-sm",children:"Tipe"}),(0,r.jsxs)("select",{name:"type",value:n.type,onChange:u,className:"w-full border px-3 py-2 rounded",children:[(0,r.jsx)("option",{value:"income",children:"Pemasukan"}),(0,r.jsx)("option",{value:"expense",children:"Pengeluaran"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"jumlah",className:"block mb-1 text-sm",children:"Jumlah"}),(0,r.jsx)("input",{type:"text",name:"amount",value:n.amount,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tanggal",className:"block mb-1 text-sm",children:"Tanggal"}),(0,r.jsx)("input",{type:"date",name:"date",value:n.date,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Catatan"}),(0,r.jsx)("input",{type:"text",name:"note",value:n.note,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Masukkan Catatan...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Kategori"}),(0,r.jsxs)("select",{name:"categoryId",value:n.categoryId,onChange:u,className:"w-full border px-3 py-2 rounded",required:!0,children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Kategori --"}),i.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Simpan"})]})}},71706:(e,t,a)=>{"use strict";a.d(t,{Hx:()=>i,R_:()=>o,SW:()=>m,UB:()=>u,Uw:()=>d,Wy:()=>h,Xk:()=>l,nI:()=>g,zS:()=>c});var r=a(35974),s=a(55103),n=a(49227);let o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{let s=new URLSearchParams({page:String(e),limit:String(t)});return a&&s.append("search",a),(await r.A.get("/transactions?".concat(s.toString()),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},i=async e=>{try{return(await r.A.get("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},c=async e=>{try{let t=await r.A.post("/transactions",e,{headers:(0,n.A)()});return console.log("Transaction created:",t.data),t.data}catch(e){(0,s.h)(e,"Transaction Error")}},l=async(e,t)=>{try{return(await r.A.put("/transactions/".concat(e),t,{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},d=async e=>{try{return(await r.A.delete("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},u=async()=>{try{return(await r.A.get("/transactions/monthly-summary",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},h=async()=>{try{return(await r.A.get("/transactions/monthly-chart",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},m=async()=>{try{return(await r.A.get("/transactions/today",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},g=async()=>{try{return(await r.A.get("/transactions/today-expense-stats",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}}},80833:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(95155);function s(){return(0,r.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})}a(12115)}},e=>{var t=t=>e(e.s=t);e.O(0,[380,673,441,684,358],()=>t(37861)),_N_E=e.O()}]);