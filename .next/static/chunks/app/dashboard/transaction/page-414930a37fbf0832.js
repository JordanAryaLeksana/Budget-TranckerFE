(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{35974:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=t(23464).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},36221:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(95155),r=t(47650),n=t(58242);let i={information:(0,s.jsx)(n.$4v,{className:"text-blue-500 w-6 h-6"}),success:(0,s.jsx)(n.jh$,{className:"text-green-500 w-6 h-6"}),warning:(0,s.jsx)(n.jDV,{className:"text-yellow-500 w-6 h-6"}),danger:(0,s.jsx)(n.XfH,{className:"text-red-500 w-6 h-6"})};function c(e){let{message:a,type:t="information",onOk:n,onCancel:c}=e;return(0,r.createPortal)((0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{children:i[t]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("p",{className:"text-gray-800 font-medium",children:a})})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[c&&(0,s.jsx)("button",{onClick:c,className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,s.jsx)("button",{onClick:n||(()=>{}),className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"OK"})]})]})}),document.body)}},36620:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var s=t(95155),r=t(12115),n=t(87051);function i(e){let{title:a,value:t}=e;return(0,s.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-xl shadow",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:a}),(0,s.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:t})]})}var c=t(29911),l=t(6874),o=t.n(l),d=t(71706),h=t(36221);function x(){let[e,a]=(0,r.useState)(""),[t,l]=(0,r.useState)([]),[x,u]=(0,r.useState)(1),[m]=(0,r.useState)(10),[g,y]=(0,r.useState)(1),[p,j]=(0,r.useState)({total_expense:0,count:0}),[f,w]=(0,r.useState)(null),b=async()=>{try{let a=await (0,d.R_)(x,m,e);l(a.data),y(a.pagination.totalPages)}catch(e){e instanceof Error?console.error({message:e.message,type:"danger"}):console.error({message:"Terjadi Kesalahan",type:"danger"})}},v=async()=>{try{let e=await (0,d.nI)();j(e.data)}catch(e){e instanceof Error?console.error({message:e.message,type:"danger"}):console.error({message:"Terjadi Kesalahan",type:"danger"})}};(0,r.useEffect)(()=>{b(),v()},[x,e,m]);let N=async a=>{w({type:"danger",message:"Apakah Kamu yakin ingin menghapus transaksi ini?",onOk:async()=>{try{await (0,d.Uw)(a),w({type:"success",message:"Transaksi Berhasil Dihapus",onOk:()=>w(null)});let t=await (0,d.R_)(x,m,e);l(t.data),y(t.pagination.totalPages)}catch(e){console.error(e),w({type:"danger",message:"Gagal menghapus transaksi",onOk:()=>w(null)})}},onCancel:()=>w(null)})};return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsx)(i,{title:"Total Pengeluaran Hari Ini",value:(0,n.A)(p.total_expense)}),(0,s.jsx)(i,{title:"Jumlah Transaksi Hari Ini",value:p.count})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative w-full sm:max-w-xs",children:[(0,s.jsx)(c.KSO,{className:"absolute top-2.5 left-3 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Cari Transaksi...",value:e,onChange:e=>{a(e.target.value),u(1)},className:"pl-10 pr-4 py-2 border rounded-md w-full text-sm"})]}),(0,s.jsxs)(o(),{href:"/dashboard/transaction/create",className:"bg-indigo-600 text-white px-4 py-2 rounded-md flex    items-center justify-center gap-2 hover:bg-indigo-700 w-full sm:w-fit",children:[(0,s.jsx)(c.OiG,{})," Buat Transaksi"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,s.jsx)("div",{className:"min-w-[600px]",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-gray-500 border-b",children:[(0,s.jsx)("th",{className:"p-3",children:"No"}),(0,s.jsx)("th",{children:"Nama"}),(0,s.jsx)("th",{children:"Waktu"}),(0,s.jsx)("th",{children:"Jumlah"}),(0,s.jsx)("th",{children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:t.length>0?t.map((e,a)=>{let t=new Date(e.date).toLocaleDateString("id-ID");return(0,s.jsxs)("tr",{className:"border-t text-gray-700",children:[(0,s.jsx)("td",{className:"p-4",children:(x-1)*m+a+1}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{className:"font-semibold",children:e.category.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.note})]}),(0,s.jsx)("td",{children:t}),(0,s.jsxs)("td",{className:"\n                                        font-medium ".concat("expense"===e.type?"text-red-600":"text-green-600","\n                                        "),children:["expense"===e.type?"- ":"+ ",(0,n.A)(e.amount)]}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o(),{href:"/dashboard/transaction/edit/".concat(e.id),className:"text-blue-500 hover:text-blue-700",children:(0,s.jsx)(c.uO9,{})}),(0,s.jsx)("button",{onClick:()=>N(e.id),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(c.qbC,{})})]})})]},a)}):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-6",children:"Tidak Ada Transaksi Ditemukan"})})})]})})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-end items-center gap-2 text-sm",children:[(0,s.jsx)("button",{className:"px-3 py-1 border rounded hover:bg-gray-100",disabled:1===x,onClick:()=>u(e=>Math.max(e-1,1)),children:"Previous"}),Array.from({length:g},(e,a)=>(0,s.jsx)("button",{className:"px-3 py-1 border rounded ".concat(x===a+1?"bg-indigo-600 text-white":"hover:bg-gray-100"),onClick:()=>u(a+1),children:a+1},a+1)),(0,s.jsx)("button",{className:"px-3 py-1 border rounded hover:bg-gray-100",disabled:x===g,onClick:()=>u(e=>Math.min(e+1,g)),children:"Next"})]}),f&&(0,s.jsx)(h.A,{type:f.type,message:f.message,onOk:f.onOk,onCancel:f.onCancel})]})}},49227:(e,a,t)=>{"use strict";function s(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}t.d(a,{A:()=>s})},55103:(e,a,t)=>{"use strict";function s(e,a){if("object"==typeof e&&null!==e&&"response"in e){var t,s;let r=null==(t=e.response)?void 0:t.data;if(r&&"object"==typeof r&&!Array.isArray(r)){if(Array.isArray(r.errors)&&r.errors.length>0)throw Error((null==r||null==(s=r.errors[0])?void 0:s.msg)||a);if("string"==typeof r.message)throw Error(r.message)}if("string"==typeof r)throw Error(r)}throw console.error("Unhandled error structure:",e),Error(a)}t.d(a,{h:()=>s})},71706:(e,a,t)=>{"use strict";t.d(a,{Hx:()=>c,R_:()=>i,SW:()=>u,UB:()=>h,Uw:()=>d,Wy:()=>x,Xk:()=>o,nI:()=>m,zS:()=>l});var s=t(35974),r=t(55103),n=t(49227);let i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{let r=new URLSearchParams({page:String(e),limit:String(a)});return t&&r.append("search",t),(await s.A.get("/transactions?".concat(r.toString()),{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},c=async e=>{try{return(await s.A.get("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},l=async e=>{try{let a=await s.A.post("/transactions",e,{headers:(0,n.A)()});return console.log("Transaction created:",a.data),a.data}catch(e){(0,r.h)(e,"Transaction Error")}},o=async(e,a)=>{try{return(await s.A.put("/transactions/".concat(e),a,{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},d=async e=>{try{return(await s.A.delete("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},h=async()=>{try{return(await s.A.get("/transactions/monthly-summary",{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},x=async()=>{try{return(await s.A.get("/transactions/monthly-chart",{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},u=async()=>{try{return(await s.A.get("/transactions/today",{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}},m=async()=>{try{return(await s.A.get("/transactions/today-expense-stats",{headers:(0,n.A)()})).data}catch(e){(0,r.h)(e,"Transaction Error")}}},74512:(e,a,t)=>{Promise.resolve().then(t.bind(t,36620))},87051:(e,a,t)=>{"use strict";function s(e){return"Rp. ".concat(null==e?void 0:e.toLocaleString("id-ID"))}t.d(a,{A:()=>s})}},e=>{var a=a=>e(e.s=a);e.O(0,[380,711,673,874,441,684,358],()=>a(74512)),_N_E=e.O()}]);