(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{35695:(e,a,t)=>{"use strict";var r=t(18999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},35974:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=t(23464).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},36221:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(95155),s=t(47650),n=t(58242);let o={information:(0,r.jsx)(n.$4v,{className:"text-blue-500 w-6 h-6"}),success:(0,r.jsx)(n.jh$,{className:"text-green-500 w-6 h-6"}),warning:(0,r.jsx)(n.jDV,{className:"text-yellow-500 w-6 h-6"}),danger:(0,r.jsx)(n.XfH,{className:"text-red-500 w-6 h-6"})};function c(e){let{message:a,type:t="information",onOk:n,onCancel:c}=e;return(0,s.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{children:o[t]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-gray-800 font-medium",children:a})})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[c&&(0,r.jsx)("button",{onClick:c,className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,r.jsx)("button",{onClick:n||(()=>{}),className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"OK"})]})]})}),document.body)}},49227:(e,a,t)=>{"use strict";function r(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}t.d(a,{A:()=>r})},55103:(e,a,t)=>{"use strict";function r(e,a){if("object"==typeof e&&null!==e&&"response"in e){var t,r;let s=null==(t=e.response)?void 0:t.data;if(s&&"object"==typeof s&&!Array.isArray(s)){if(Array.isArray(s.errors)&&s.errors.length>0)throw Error((null==s||null==(r=s.errors[0])?void 0:r.msg)||a);if("string"==typeof s.message)throw Error(s.message)}if("string"==typeof s)throw Error(s)}throw console.error("Unhandled error structure:",e),Error(a)}t.d(a,{h:()=>r})},57366:(e,a,t)=>{Promise.resolve().then(t.bind(t,82893))},60708:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(95155),s=t(12115),n=t(35974),o=t(55103),c=t(49227);let i=async()=>{try{return(await n.A.get("/categories",{headers:(0,c.A)()})).data}catch(e){(0,o.h)(e,"Failed to fetch categories")}},l=e=>{let{initialData:a,onSubmit:t}=e,[n,o]=(0,s.useState)({type:"expense",amount:"",date:new Date().toISOString().slice(0,10),note:"",categoryId:""}),[c,l]=(0,s.useState)([]),d=async()=>{try{let e=await i();l(e.data)}catch(e){e instanceof Error?console.error({message:e.message,type:"danger"}):console.error({message:"Terjadi Kesalahan",type:"danger"})}};(0,s.useEffect)(()=>{a&&o({...a,categoryId:String(a.categoryId),amount:String(a.amount)})},[]),(0,s.useEffect)(()=>{d()},[]);let u=e=>{let{name:a,value:t}=e.target;if("amount"===a){let e=function(e){let a=parseInt(e.replace(/\D/g,""));return isNaN(a)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}(t.replace(/\D/g,""));o(a=>({...a,amount:e}));return}o(e=>({...e,[a]:t}))};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=n.amount.replace(/\D/g,"");t({...n,amount:a,categoryId:parseInt(String(n.categoryId))})},className:"space-y-4 max-w-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tipe",className:"block mb-1 text-sm",children:"Tipe"}),(0,r.jsxs)("select",{name:"type",value:n.type,onChange:u,className:"w-full border px-3 py-2 rounded",children:[(0,r.jsx)("option",{value:"income",children:"Pemasukan"}),(0,r.jsx)("option",{value:"expense",children:"Pengeluaran"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"jumlah",className:"block mb-1 text-sm",children:"Jumlah"}),(0,r.jsx)("input",{type:"text",name:"amount",value:n.amount,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tanggal",className:"block mb-1 text-sm",children:"Tanggal"}),(0,r.jsx)("input",{type:"date",name:"date",value:n.date,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Catatan"}),(0,r.jsx)("input",{type:"text",name:"note",value:n.note,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Masukkan Catatan...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Kategori"}),(0,r.jsxs)("select",{name:"categoryId",value:n.categoryId,onChange:u,className:"w-full border px-3 py-2 rounded",required:!0,children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Kategori --"}),c.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Simpan"})]})}},71706:(e,a,t)=>{"use strict";t.d(a,{Hx:()=>c,R_:()=>o,SW:()=>m,UB:()=>u,Uw:()=>d,Wy:()=>h,Xk:()=>l,nI:()=>g,zS:()=>i});var r=t(35974),s=t(55103),n=t(49227);let o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{let s=new URLSearchParams({page:String(e),limit:String(a)});return t&&s.append("search",t),(await r.A.get("/transactions?".concat(s.toString()),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},c=async e=>{try{return(await r.A.get("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},i=async e=>{try{let a=await r.A.post("/transactions",e,{headers:(0,n.A)()});return console.log("Transaction created:",a.data),a.data}catch(e){(0,s.h)(e,"Transaction Error")}},l=async(e,a)=>{try{return(await r.A.put("/transactions/".concat(e),a,{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},d=async e=>{try{return(await r.A.delete("/transactions/".concat(e),{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},u=async()=>{try{return(await r.A.get("/transactions/monthly-summary",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},h=async()=>{try{return(await r.A.get("/transactions/monthly-chart",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},m=async()=>{try{return(await r.A.get("/transactions/today",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}},g=async()=>{try{return(await r.A.get("/transactions/today-expense-stats",{headers:(0,n.A)()})).data}catch(e){(0,s.h)(e,"Transaction Error")}}},80833:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(95155);function s(){return(0,r.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})}t(12115)},82893:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(95155),s=t(60708),n=t(35695),o=t(12115),c=t(36221),i=t(80833),l=t(71706);function d(){let e=(0,n.useRouter)(),[a,t]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),h=async e=>{t(!0);try{await (0,l.zS)({...e,category_id:e.categoryId}),u({type:"success",message:"Transaksi Berhasil Ditambahkan"})}catch(e){e instanceof Error?u({message:e.message,type:"danger"}):u({message:"Terjadi Kesalahan",type:"danger"})}finally{t(!1)}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Buat Transaksi Baru"}),a&&(0,r.jsx)(i.A,{}),d&&(0,r.jsx)(c.A,{type:d.type,message:d.message,onOk:()=>{u(null),"success"===d.type&&e.push("/dashboard/transaction")}}),(0,r.jsx)(s.A,{onSubmit:h})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[380,673,441,684,358],()=>a(57366)),_N_E=e.O()}]);