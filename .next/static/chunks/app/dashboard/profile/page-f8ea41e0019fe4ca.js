(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{8508:(e,t,a)=>{"use strict";a.d(t,{ME:()=>i,iD:()=>n,kz:()=>l,ri:()=>o});var r=a(35974),s=a(55103);let n=async e=>{try{let t=await r.A.post("/auth/login",e);return console.log("Login response:",t.data),t.data}catch(e){(0,s.h)(e,"Login Failed")}},l=async e=>{try{return(await r.A.post("/auth/register",e)).data}catch(e){(0,s.h)(e,"Register Failed")}},i=async e=>{try{return(await r.A.get("/auth/profile",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){(0,s.h)(e,"Get Profile Failed")}},o=()=>{localStorage.removeItem("token")}},35974:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(23464).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},36221:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(95155),s=a(47650),n=a(58242);let l={information:(0,r.jsx)(n.$4v,{className:"text-blue-500 w-6 h-6"}),success:(0,r.jsx)(n.jh$,{className:"text-green-500 w-6 h-6"}),warning:(0,r.jsx)(n.jDV,{className:"text-yellow-500 w-6 h-6"}),danger:(0,r.jsx)(n.XfH,{className:"text-red-500 w-6 h-6"})};function i(e){let{message:t,type:a="information",onOk:n,onCancel:i}=e;return(0,s.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-white/30",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-sm mx-auto rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{children:l[a]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-gray-800 font-medium",children:t})})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[i&&(0,r.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,r.jsx)("button",{onClick:n||(()=>{}),className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"OK"})]})]})}),document.body)}},49227:(e,t,a)=>{"use strict";function r(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}a.d(t,{A:()=>r})},55103:(e,t,a)=>{"use strict";function r(e,t){if("object"==typeof e&&null!==e&&"response"in e){var a,r;let s=null==(a=e.response)?void 0:a.data;if(s&&"object"==typeof s&&!Array.isArray(s)){if(Array.isArray(s.errors)&&s.errors.length>0)throw Error((null==s||null==(r=s.errors[0])?void 0:r.msg)||t);if("string"==typeof s.message)throw Error(s.message)}if("string"==typeof s)throw Error(s)}throw console.error("Unhandled error structure:",e),Error(t)}a.d(t,{h:()=>r})},80833:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(95155);function s(){return(0,r.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})}a(12115)},81331:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),s=a(12115),n=a(8508),l=a(35974),i=a(55103),o=a(49227);let c=async(e,t)=>{try{return(await l.A.put("/users/".concat(e),t,{headers:(0,o.A)()})).data}catch(e){(0,i.h)(e,"User Service Error")}};var d=a(80833),m=a(36221);function u(){let[e,t]=(0,s.useState)({id:0,name:"",email:"",number:""}),[a,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),x=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let a=await (0,n.ME)(e),r=a.data.number||"",s=r.startsWith("+62")?r.replace("+62",""):r;t({...a.data,number:s})}catch(e){e instanceof Error?h({message:e.message,type:"danger"}):h({message:"Terjadi Kesalahan",type:"danger"})}finally{l(!1)}};(0,s.useEffect)(()=>{x()},[]);let p=e=>{let{name:a,value:r}=e.target,s="number"===a?r.replace(/[^0-9]/g,""):r;t(e=>({...e,[a]:s}))},g=async a=>{a.preventDefault(),o(!0);try{let a=await c(e.id,{name:e.name,email:e.email,number:"+62".concat(e.number)});t({...a.data,number:a.data.number.replace("+62","")}),h({message:"Profil Berhasil Diperbarui",type:"success"})}catch(e){e instanceof Error?h({message:e.message,type:"danger"}):h({message:"Terjadi Kesalahan",type:"danger"})}};return(0,r.jsxs)("div",{className:"max-w-xl mx-auto p-6 space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Profil Pengguna"}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block mb-1 text-sm font-medium text-gray-700",children:"Nama"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:p,name:"name",className:"w-full border rounded px-4 py-2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block mb-1 text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",value:e.email,onChange:p,name:"email",className:"w-full border rounded px-4 py-2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"number",className:"block mb-1 text-sm font-medium text-gray-700",children:"Nomor Telepon"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 text-sm",children:"+62"}),(0,r.jsx)("input",{type:"text",value:e.number,onChange:p,name:"number",className:"w-full border rounded px-4 py-2 pl-12",required:!0})]})]}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded disabled:opacity-50",children:a?(0,r.jsx)(d.A,{}):i?"Menyimpan...":"Simpan Perubahan"})]}),u&&(0,r.jsx)(m.A,{type:u.type,message:u.message,onOk:()=>h(null)})]})}},97373:(e,t,a)=>{Promise.resolve().then(a.bind(a,81331))}},e=>{var t=t=>e(e.s=t);e.O(0,[380,673,441,684,358],()=>t(97373)),_N_E=e.O()}]);