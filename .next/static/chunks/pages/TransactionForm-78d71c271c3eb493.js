(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{6882:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(37876),n=a(14232),o=a(13833),l=a(82240);let s=async()=>{try{return(await o.A.get("/categories",{headers:function(){let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}}()})).data}catch(e){(0,l.h)(e,"Failed to fetch categories")}},i=e=>{let{initialData:t,onSubmit:a}=e,[o,l]=(0,n.useState)({type:"expense",amount:"",date:new Date().toISOString().slice(0,10),note:"",categoryId:""}),[i,c]=(0,n.useState)([]),d=async()=>{try{let e=await s();c(e.data)}catch(e){e instanceof Error?console.error({message:e.message,type:"danger"}):console.error({message:"Terjadi Kesalahan",type:"danger"})}};(0,n.useEffect)(()=>{t&&l({...t,categoryId:String(t.categoryId),amount:String(t.amount)})},[]),(0,n.useEffect)(()=>{d()},[]);let u=e=>{let{name:t,value:a}=e.target;if("amount"===t){let e=function(e){let t=parseInt(e.replace(/\D/g,""));return isNaN(t)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)}(a.replace(/\D/g,""));l(t=>({...t,amount:e}));return}l(e=>({...e,[t]:a}))};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=o.amount.replace(/\D/g,"");a({...o,amount:t,categoryId:parseInt(String(o.categoryId))})},className:"space-y-4 max-w-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tipe",className:"block mb-1 text-sm",children:"Tipe"}),(0,r.jsxs)("select",{name:"type",value:o.type,onChange:u,className:"w-full border px-3 py-2 rounded",children:[(0,r.jsx)("option",{value:"income",children:"Pemasukan"}),(0,r.jsx)("option",{value:"expense",children:"Pengeluaran"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"jumlah",className:"block mb-1 text-sm",children:"Jumlah"}),(0,r.jsx)("input",{type:"text",name:"amount",value:o.amount,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tanggal",className:"block mb-1 text-sm",children:"Tanggal"}),(0,r.jsx)("input",{type:"date",name:"date",value:o.date,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Contoh: Rp. 10.000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Catatan"}),(0,r.jsx)("input",{type:"text",name:"note",value:o.note,onChange:u,className:"w-full border px-3 py-2 rounded",placeholder:"Masukkan Catatan...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"catatan",className:"block mb-1 text-sm",children:"Kategori"}),(0,r.jsxs)("select",{name:"categoryId",value:o.categoryId,onChange:u,className:"w-full border px-3 py-2 rounded",required:!0,children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Kategori --"}),i.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Simpan"})]})}},13833:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(91040).A.create({baseURL:"http://localhost:5001/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json"}})},67884:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/TransactionForm",function(){return a(6882)}])},82240:(e,t,a)=>{"use strict";function r(e,t){if("object"==typeof e&&null!==e&&"response"in e){var a,r;let n=null==(a=e.response)?void 0:a.data;if(n&&"object"==typeof n&&!Array.isArray(n)){if(Array.isArray(n.errors)&&n.errors.length>0)throw Error((null==n||null==(r=n.errors[0])?void 0:r.msg)||t);if("string"==typeof n.message)throw Error(n.message)}if("string"==typeof n)throw Error(n)}throw console.error("Unhandled error structure:",e),Error(t)}a.d(t,{h:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[40,636,593,792],()=>t(67884)),_N_E=e.O()}]);